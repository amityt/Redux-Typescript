name: Frontend-Unit-Test
on: [pull_request]

jobs:
  test:
    name: Cypress run
    runs-on: ubuntu-16.04
    steps:
      - name: Checkout
        uses: actions/checkout@v1

      - name: Cypress runs
        uses: cypress-io/github-action@v1
        with:
          record: false
          start: npm run test
          working-directory: ./
        env:
          CYPRESS_RECORD_KEY: 5c30091a-3557-4bb6-8b49-b21bea4ea9c4

      - name: Checking if the tests succeeded
        if: ${{ success() }}
        uses: peter-evans/create-or-update-comment@v1
        with:
          comment-id: "${{ github.event.comment.id }}"
          body: |
            **Test Result:** All tests are passed
          reactions: hooray
        env:
          RUN_ID: ${{ github.run_id }}
      - name: Checking if the tests failed
        if: ${{ failure() }}
        uses: peter-evans/create-or-update-comment@v1
        with:
          comment-id: "${{ github.event.comment.id }}"
          body: |
            **Test Result:** Some tests failed
          reactions: sad
        env:
          RUN_ID: ${{ github.run_id }}
